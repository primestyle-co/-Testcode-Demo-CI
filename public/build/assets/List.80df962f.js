import{_ as $,d as L,r as k,i as N,a as I,j as T,b as w,c as o,w as n,u as V,e as F,g as s,o as g,F as A,h as v,t as R,k as x,l as B}from"./app.bf2c33b3.js";const z=L({setup(){const a=k(!1),l=k(),e=N({title:"",author:"",page:1}),r=V(),p=k(),c=I(()=>r.state.post.posts),b=t=>{r.dispatch("post/search",e)};T(async()=>{await r.dispatch("post/search",e)});const _=t=>{r.dispatch("post/delete",t).then(C=>{r.dispatch("post/search",e)})},f=I(()=>({total:c.value.total,current:c.value.current_page,pageSize:c.value.per_page})),u=t=>{e.page=t.current,r.dispatch("post/search",e)},m=(t,C,d)=>{e.page=t.current,p.value=d,e.sort_field=d.field,d.order==="descend"?e.sort_direction="desc":d.order==="ascend"?e.sort_direction="asc":(e.sort_field=void 0,e.sort_direction=void 0),console.log(e,"tung formState"),r.dispatch("post/search",e)},h=()=>{e.title="",e.author="",e.page=1,e.sort_field=void 0,e.sort_direction=void 0,p.value=!1},y=I(()=>{const t=p.value||{};return[{title:"ID",dataIndex:"id",sorter:!0,sortOrder:t.field==="id"&&t.order},{title:"Title",dataIndex:"title",sorter:!0,sortOrder:t.field==="title"&&t.order},{title:"Author",dataIndex:"created_by",sorter:!0,sortOrder:t.field==="created_by"&&t.order},{title:"Created At",dataIndex:"created_at",sorter:!0,sortOrder:t.field==="created_at"&&t.order},{title:"Operation",dataIndex:"operation"}]});return{formRef:l,formState:e,expand:a,onFinish:b,columns:y,posts:c,onDelete:_,pagination:f,onChange:u,onTableChange:m,resetFields:h}}}),E=v("Search"),U=v("Clear"),j=F("div",{class:"search-result-list"},"Search Result List",-1),M=v("Edit"),q=F("a",null,"Delete",-1),G=F("br",null,null,-1);function H(a,l,e,r,p,c){const b=s("a-page-header"),_=s("a-input"),f=s("a-form-item"),u=s("a-col"),m=s("a-row"),h=s("a-button"),y=s("a-form"),t=s("router-link"),C=s("a-popconfirm"),d=s("a-space"),D=s("a-table"),O=s("a-layout");return g(),w("div",null,[o(b,{style:{border:"1px solid rgb(235, 237, 240)"},title:"List","sub-title":"List of post"}),o(y,{ref:"formRef",name:"advanced_search",class:"ant-advanced-search-form",model:a.formState,onFinish:a.onFinish},{default:n(()=>[o(m,{gutter:24},{default:n(()=>[o(u,{span:8,offset:1},{default:n(()=>[o(f,{name:"title",label:"title"},{default:n(()=>[o(_,{value:a.formState.title,"onUpdate:value":l[0]||(l[0]=i=>a.formState.title=i),placeholder:"placeholder"},null,8,["value"])]),_:1})]),_:1}),o(u,{span:8,offset:1},{default:n(()=>[o(f,{name:"author",label:"Author"},{default:n(()=>[o(_,{value:a.formState.author,"onUpdate:value":l[1]||(l[1]=i=>a.formState.author=i),placeholder:"placeholder"},null,8,["value"])]),_:1})]),_:1})]),_:1}),o(m,null,{default:n(()=>[o(u,{span:24,style:{"text-align":"right"}},{default:n(()=>[o(h,{type:"primary","html-type":"submit"},{default:n(()=>[E]),_:1}),o(h,{style:{margin:"0 8px"},onClick:a.resetFields},{default:n(()=>[U]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["model","onFinish"]),j,o(O,null,{default:n(()=>[o(D,{columns:a.columns,"data-source":a.posts.data,onChange:a.onTableChange,pagination:a.pagination},{bodyCell:n(({column:i,text:J,record:S})=>[i.dataIndex==="created_by"?(g(),w(A,{key:0},[v(R(S.user.name),1)],64)):i.dataIndex==="operation"?(g(),x(d,{key:1,size:15,style:{"text-align":"center"}},{default:n(()=>[o(t,{to:{name:"post_update",params:{id:S.id}}},{default:n(()=>[M]),_:2},1032,["to"]),a.posts.data.length?(g(),x(C,{key:0,title:"Sure to delete?",onConfirm:K=>a.onDelete(S.id)},{default:n(()=>[q]),_:2},1032,["onConfirm"])):B("",!0)]),_:2},1024)):B("",!0)]),_:1},8,["columns","data-source","onChange","pagination"])]),_:1}),G])}var Q=$(z,[["render",H]]);export{Q as default};
