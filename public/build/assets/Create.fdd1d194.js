import{_ as g,d as C,b as y,j as w,a as $,c as a,w as n,n as k,u as S,f,m as i,e as F,g as o,o as q,h as B,t as I,p as T}from"./app.95a4fd28.js";const M=C({props:["id"],setup(t){T();const u={labelCol:{span:8},wrapperCol:{span:16}},s=S(),d={required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},l=y(()=>s.state.post.post),m=e=>{s.commit("post/updatePostTitle",e.target.value)},p=e=>{s.commit("post/updatePostContent",e.target.value)};return w(async()=>{t.id&&await s.dispatch("post/detail",t.id)}),{formState:l,onFinish:()=>{t.id?s.dispatch("post/update",l.value).then(e=>{e.data.status=="ok"&&f.push("/posts")}).catch(e=>{if(e.response.status===404&&i.error("you can't edit other people's posts"),e.response.data.errors)for(var r in e.response.data.errors){i.error(e.response.data.errors[r]);break}}):s.dispatch("post/create",l.value).then(e=>{e.data.status=="ok"&&f.push("/posts")}).catch(e=>{if(e.response.data.errors)for(var r in e.response.data.errors){i.error(e.response.data.errors[r]);break}})},layout:u,validateMessages:d,updateTitle:m,updateContent:p}}}),N=F("br",null,null,-1);function P(t,u,s,d,l,m){const p=o("a-page-header"),c=o("a-input"),e=o("a-form-item"),r=o("a-textarea"),_=o("a-button"),b=o("a-col"),h=o("a-row"),v=o("a-form");return q(),$("div",null,[a(p,{style:{border:"1px solid rgb(235, 237, 240)"},title:"Create","sub-title":"Create a post"}),a(v,k({model:t.formState},t.layout,{name:"nest-messages","validate-messages":t.validateMessages,onFinish:t.onFinish}),{default:n(()=>[a(h,{gutter:24},{default:n(()=>[a(b,{span:16,offset:1},{default:n(()=>[a(e,{name:"title",label:"title",rules:[{required:!0}]},{default:n(()=>[a(c,{value:t.formState.title,onInput:t.updateTitle},null,8,["value","onInput"])]),_:1}),a(e,{name:"content",label:"content",rules:[{required:!0}]},{default:n(()=>[a(r,{value:t.formState.content,onInput:t.updateContent},null,8,["value","onInput"])]),_:1}),a(e,{"wrapper-col":{...t.layout.wrapperCol,offset:8}},{default:n(()=>[a(_,{type:"primary","html-type":"submit"},{default:n(()=>[B(I(t.id?"Update":"Create"),1)]),_:1})]),_:1},8,["wrapper-col"])]),_:1})]),_:1})]),_:1},16,["model","validate-messages","onFinish"]),N])}var j=g(M,[["render",P]]);export{j as default};
